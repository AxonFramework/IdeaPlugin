name: Publish

on:
    release:
        types:
            - created
jobs:
    build:
        runs-on: ubuntu-latest
        steps:
            -   uses: actions/checkout@v2
            -   name: Set up JDK 11
                uses: actions/setup-java@v2
                with:
                    java-version: '11'
                    distribution: 'adopt'

            -   name: Publish plugin
                uses: gradle/gradle-build-action@4137be6a8bf7d7133955359dbd952c0ca73b1021
                with:
                    arguments: publishPlugin
                env: # Or as an environment variable
                    PUBLISH_TOKEN: ${{ secrets.PUBLISH_TOKEN }}
                    PRIVATE_KEY_PASSWORD: ${{ secrets.PRIVATE_KEY_PASSWORD }}
                    PRIVATE_KEY: ${{ secrets.PRIVATE_KEY }}
                    CERTIFICATE_CHAIN: ${{ secrets.CERTIFICATE_CHAIN }}
