<idea-plugin require-restart="false">
    <id>org.axonframework.intellij.axonplugin</id>
    <name>Axon Framework</name>
    <version>${project.version}</version>
    <vendor url="https://axoniq.io/">Axon Framework</vendor>

    <description>
        This plugin helps to navigate from and to the axon framework event handler annotations. Axon Framework helps
        build scalable, extensible and maintainable applications by supporting developers apply the Command Query
        Responsibility Segregation (CQRS) architectural pattern.
        Please report issues at https://github.com/AxonFramework/IdeaPlugin/issues
    </description>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.java</depends>
    <depends>org.jetbrains.kotlin</depends>

    <idea-version since-build="203"/>

    <extensions defaultExtensionNs="com.intellij">
        <codeInsight.lineMarkerProvider language="JAVA"
                                        implementationClass="org.axonframework.intellij.ide.plugin.markers.PublishMethodLineMarkerProvider"/>
        <codeInsight.lineMarkerProvider language="JAVA"
                                        implementationClass="org.axonframework.intellij.ide.plugin.markers.DeadlinePublisherLineMarkerProvider"/>
        <codeInsight.lineMarkerProvider language="JAVA"
                                        implementationClass="org.axonframework.intellij.ide.plugin.markers.HandlerMethodLineMarkerProvider"/>
        <codeInsight.lineMarkerProvider language="JAVA"
                                        implementationClass="org.axonframework.intellij.ide.plugin.markers.ClassLineMarkerProvider"/>
        <codeInsight.lineMarkerProvider language="kotlin"
                                        implementationClass="org.axonframework.intellij.ide.plugin.markers.PublishMethodLineMarkerProvider"/>
        <codeInsight.lineMarkerProvider language="kotlin"
                                        implementationClass="org.axonframework.intellij.ide.plugin.markers.HandlerMethodLineMarkerProvider"/>
        <codeInsight.lineMarkerProvider language="kotlin"
                                        implementationClass="org.axonframework.intellij.ide.plugin.markers.ClassLineMarkerProvider"/>
        <codeInsight.lineMarkerProvider language="kotlin"
                                        implementationClass="org.axonframework.intellij.ide.plugin.markers.DeadlinePublisherLineMarkerProvider"/>

        <!-- Project services -->
        <projectService
                serviceImplementation="org.axonframework.intellij.ide.plugin.resolving.AggregateStructureResolver"/>
        <projectService serviceImplementation="org.axonframework.intellij.ide.plugin.resolving.AnnotationResolver"/>
        <projectService serviceImplementation="org.axonframework.intellij.ide.plugin.resolving.MessageHandlerResolver"/>
        <projectService
                serviceImplementation="org.axonframework.intellij.ide.plugin.resolving.DeadlineManagerResolver"/>
        <projectService
                serviceImplementation="org.axonframework.intellij.ide.plugin.resolving.MessageCreationResolver"/>

        <!-- Usage providers -->
        <implicitUsageProvider implementation="org.axonframework.intellij.ide.plugin.usage.AxonImplicitUsageProvider"/>

        <!-- Java inspections -->
        <localInspection displayName="Aggregate has an identifier" shortName="JavaAggregateIdInspection"
                         groupName="Axon Framework usage" language="JAVA"
                         implementationClass="org.axonframework.intellij.ide.plugin.inspections.aggregate.JavaAggregateIdInspection"
                         enabledByDefault="true"/>
        <localInspection displayName="Aggregate has no-argument constructor"
                         shortName="JavaAggregateConstructorInspection" groupName="Axon Framework usage"
                         language="JAVA"
                         implementationClass="org.axonframework.intellij.ide.plugin.inspections.aggregate.JavaAggregateConstructorInspection"
                         enabledByDefault="true"/>
        <localInspection displayName="Aggregate members have an ID"
                         shortName="JavaAggregateMemberRoutingKeyInspection" groupName="Axon Framework usage"
                         language="JAVA"
                         implementationClass="org.axonframework.intellij.ide.plugin.inspections.aggregate.JavaAggregateMemberRoutingKeyInspection"
                         enabledByDefault="true"/>

        <!-- Kotlin inspections -->
        <localInspection displayName="Aggregate has an identifier" shortName="KotlinAggregateIdInspection"
                         groupName="Axon Framework usage" language="kotlin"
                         implementationClass="org.axonframework.intellij.ide.plugin.inspections.aggregate.KotlinAggregateIdInspection"
                         enabledByDefault="true"/>
        <localInspection displayName="Aggregate has no-argument constructor"
                         shortName="KotlinAggregateConstructorInspection" groupName="Axon Framework usage"
                         language="kotlin"
                         implementationClass="org.axonframework.intellij.ide.plugin.inspections.aggregate.KotlinAggregateConstructorInspection"
                         enabledByDefault="true"/>
    </extensions>

    <actions>
        <action id="DumpAxonInfoAction" text="Dump Axon Plugin Information"
                class="org.axonframework.intellij.ide.plugin.actions.DumpAxonInformationAction"/>
        <action id="DumpAxonPerformanceAction" text="Dump Axon Plugin Performance"
                class="org.axonframework.intellij.ide.plugin.actions.DumpAxonPerformanceAction"/>
        <action id="AxonReferenceGuideAction" text="Axon Reference Guide"
                class="org.axonframework.intellij.ide.plugin.actions.AxonReferenceGuideAction"/>
    </actions>
</idea-plugin>
