<idea-plugin require-restart="false">
    <id>io.axoniq.ide.intellij</id>
    <name>Axon Framework</name>
    <version>${project.version}</version>
    <vendor url="https://axoniq.io/">AxonIQ</vendor>

    <description>
        <![CDATA[
        Supports developers while writing applications using <a href="https://axoniq.io/">Axon Framework</a>. <br/><br/>
        Axon Framework helps build scalable, extensible and maintainable applications by supporting developers apply the Command Query
        Responsibility Segregation (CQRS) architectural pattern.<br/><br/>

        The plugin provides the following features:
        <ul>
        <li>Line markers to visualize commands, events, queries and deadlines</li>
        <li>Several inspections on code structure that is required for Axon Framework</li>
        <li>Marks methods used by Axon Framework as used, such as annotated methods</li>
        <li>Easy access to the reference guide (ctrl+shift+a and type axon)
        </ul>

        If you have a feature request, or want to report a bug, please report this at our <a href="https://github.com/AxonFramework/IdeaPlugin/issues">Github issue tracker</a>.<br/>
        For questions on Axon Framework usage, or about the plugin, please visit our <a href="https://discuss.axoniq.io/">Discuss</a>.
     ]]>
    </description>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.java</depends>
    <depends>org.jetbrains.kotlin</depends>

    <idea-version since-build="203"/>

    <extensions defaultExtensionNs="com.intellij">
        <codeInsight.lineMarkerProvider language="JAVA"
                                        implementationClass="org.axonframework.intellij.ide.plugin.markers.publishers.PublishMethodLineMarkerProvider"/>
        <codeInsight.lineMarkerProvider language="JAVA"
                                        implementationClass="org.axonframework.intellij.ide.plugin.markers.publishers.DeadlinePublisherLineMarkerProvider"/>
        <codeInsight.lineMarkerProvider language="JAVA"
                                        implementationClass="org.axonframework.intellij.ide.plugin.markers.handlers.CommonHandlerMethodLineMarkerProvider"/>
        <codeInsight.lineMarkerProvider language="JAVA"
                                        implementationClass="org.axonframework.intellij.ide.plugin.markers.handlers.CommandInterceptorLineMarkerProvider"/>
        <codeInsight.lineMarkerProvider language="JAVA"
                                        implementationClass="org.axonframework.intellij.ide.plugin.markers.handlers.DeadlineHandlerMethodLineMarkerProvider"/>
        <codeInsight.lineMarkerProvider language="JAVA"
                                        implementationClass="org.axonframework.intellij.ide.plugin.markers.ClassLineMarkerProvider"/>
        <codeInsight.lineMarkerProvider language="JAVA"
                                        implementationClass="org.axonframework.intellij.ide.plugin.markers.handlers.InterceptedCommandHandlerMethodLineMarkerProvider"/>
        <codeInsight.lineMarkerProvider language="kotlin"
                                        implementationClass="org.axonframework.intellij.ide.plugin.markers.publishers.PublishMethodLineMarkerProvider"/>
        <codeInsight.lineMarkerProvider language="kotlin"
                                        implementationClass="org.axonframework.intellij.ide.plugin.markers.handlers.CommonHandlerMethodLineMarkerProvider"/>
        <codeInsight.lineMarkerProvider language="kotlin"
                                        implementationClass="org.axonframework.intellij.ide.plugin.markers.handlers.CommandInterceptorLineMarkerProvider"/>
        <codeInsight.lineMarkerProvider language="kotlin"
                                        implementationClass="org.axonframework.intellij.ide.plugin.markers.handlers.DeadlineHandlerMethodLineMarkerProvider"/>
        <codeInsight.lineMarkerProvider language="kotlin"
                                        implementationClass="org.axonframework.intellij.ide.plugin.markers.ClassLineMarkerProvider"/>
        <codeInsight.lineMarkerProvider language="kotlin"
                                        implementationClass="org.axonframework.intellij.ide.plugin.markers.publishers.DeadlinePublisherLineMarkerProvider"/>
        <codeInsight.lineMarkerProvider language="kotlin"
                                        implementationClass="org.axonframework.intellij.ide.plugin.markers.handlers.InterceptedCommandHandlerMethodLineMarkerProvider"/>

        <!-- Project services -->
        <projectService
                serviceImplementation="org.axonframework.intellij.ide.plugin.resolving.AggregateStructureResolver"/>
        <projectService serviceImplementation="org.axonframework.intellij.ide.plugin.resolving.AnnotationResolver"/>
        <projectService serviceImplementation="org.axonframework.intellij.ide.plugin.resolving.MessageHandlerResolver"/>
        <projectService
                serviceImplementation="org.axonframework.intellij.ide.plugin.resolving.DeadlineManagerResolver"/>
        <projectService
                serviceImplementation="org.axonframework.intellij.ide.plugin.resolving.MessageCreationResolver"/>

        <!-- Usage providers -->
        <implicitUsageProvider implementation="org.axonframework.intellij.ide.plugin.usage.AxonImplicitUsageProvider"/>

        <!-- Java inspections -->
        <localInspection displayName="Aggregate has an identifier" shortName="JavaAggregateIdInspection"
                         groupName="Axon Framework usage" language="JAVA"
                         implementationClass="org.axonframework.intellij.ide.plugin.inspections.aggregate.JavaAggregateIdInspection"
                         enabledByDefault="true"/>
        <localInspection displayName="Aggregate has no-argument constructor"
                         shortName="JavaAggregateConstructorInspection" groupName="Axon Framework usage"
                         language="JAVA"
                         implementationClass="org.axonframework.intellij.ide.plugin.inspections.aggregate.JavaAggregateConstructorInspection"
                         enabledByDefault="true"/>
        <localInspection displayName="Aggregate members have an ID"
                         shortName="JavaAggregateMemberRoutingKeyInspection" groupName="Axon Framework usage"
                         language="JAVA"
                         implementationClass="org.axonframework.intellij.ide.plugin.inspections.aggregate.JavaAggregateMemberRoutingKeyInspection"
                         enabledByDefault="true"/>

        <!-- Kotlin inspections -->
        <localInspection displayName="Aggregate has an identifier" shortName="KotlinAggregateIdInspection"
                         groupName="Axon Framework usage" language="kotlin"
                         implementationClass="org.axonframework.intellij.ide.plugin.inspections.aggregate.KotlinAggregateIdInspection"
                         enabledByDefault="true"/>
        <localInspection displayName="Aggregate has no-argument constructor"
                         shortName="KotlinAggregateConstructorInspection" groupName="Axon Framework usage"
                         language="kotlin"
                         implementationClass="org.axonframework.intellij.ide.plugin.inspections.aggregate.KotlinAggregateConstructorInspection"
                         enabledByDefault="true"/>
        <localInspection displayName="Aggregate members have an ID"
                         shortName="KotlinAggregateMemberRoutingKeyInspection" groupName="Axon Framework usage"
                         language="JAVA"
                         implementationClass="org.axonframework.intellij.ide.plugin.inspections.aggregate.KotlinAggregateMemberRoutingKeyInspection"
                         enabledByDefault="true"/>
    </extensions>

    <actions>
        <action id="DumpAxonInfoAction" text="Dump Axon Plugin Information"
                class="org.axonframework.intellij.ide.plugin.actions.DumpAxonInformationAction"/>
        <action id="DumpAxonPerformanceAction" text="Dump Axon Plugin Performance"
                class="org.axonframework.intellij.ide.plugin.actions.DumpAxonPerformanceAction"/>
        <action id="AxonReferenceGuideAction" text="Axon Reference Guide"
                class="org.axonframework.intellij.ide.plugin.actions.AxonReferenceGuideAction"/>
    </actions>
</idea-plugin>
